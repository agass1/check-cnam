# Telegram Bot для уведомления об истечении медицинского полиса

Этот бот автоматически проверяет **статус медицинского полиса граждан Республики Молдова** и уведомляет в Telegram, если полис истёк.

Проверка выполняется каждые **24 часа**, таймер реализован прямо в скрипте для кроссплатформенной работы **без использования cron или Task Scheduler**.

Для стабильной работы рекомендуется добавить скрипт в **автозагрузку** вашей системы.

---------------------------------------------------------------

## Платформа проверки

https://aoam.cnam.gov.md:10201/check-status

---------------------------------------------------------------

## Установка зависимостей

Содержимое `requirements.txt`:

selenium>=4.15.0  
requests>=2.31.0  

Установка:

pip install -r requirements.txt  
или  
pip3 install -r requirements.txt  

Также необходим Chrome или Firefox и соответствующий WebDriver в PATH.

---------------------------------------------------------------

## Настройка Telegram бота

1. Создайте бота через @BotFather  
   - /newbot  
   - задайте имя  
   - задайте username (должен оканчиваться на bot)
   - сохраните полученный токен  

2. Получение chat_id  
   Отредактируйте `getchatid.py`:

TOKEN = "ТОКЕН_ИЗ_BOTFATHER"

Запустите:

python3 getchatid.py

В ответ получите:

Ваш личный chat_id: xxxxxxxxx

---------------------------------------------------------------

## Настройка основного скрипта

Отредактируйте `med.py`:

TOKEN = "ВСТАВЬТЕ_ТОКЕН_ИЗ_BOTFATHER"
CHAT_ID = "ВСТАВЬТЕ_АЙДИ_ЧАТА"
DATA_IN ="ВСТАВЬТЕ_ПРОВЕРЯЕМЫЙ_НОМЕР_ПАСПОРТА" 

HEADLESS = True  
TESTMODE = False  

Запуск:

python3 med.py

---------------------------------------------------------------

## Параметры

HEADLESS  
True — браузер фоном  
False — браузер видим  

TESTMODE  
True — отправляет любой статус каждые 24 часа  
False — отправляет уведомление только если статус != ASIGURAT  

---------------------------------------------------------------

## Логика уведомлений

if TESTMODE:
    send_telegram_message(f"[TEST] Статус: {result}")
else:
    if result.strip().upper() != "ASIGURAT":
        send_telegram_message("Seems your health insurance expired")

---------------------------------------------------------------

## Автозапуск

Linux: autostart / screen / tmux  
Windows: Startup folder или Task Scheduler
